{% extends 'base.html' %}
{% block title %}My Account{% endblock %}
{% block content %}
  <section class="section">
    <div class="container" style="max-width:920px;">
      <h1>My Account</h1>
      <p class="lead">Tell us about you to personalize your experience.</p>
      <form method="post" enctype="multipart/form-data" class="card">
        <div class="card-inner">
          {% csrf_token %}
          <div style="display:grid; grid-template-columns: 220px 1fr; gap:1rem; align-items:start;">
            <div>
              <div class="card" style="overflow:hidden; border-radius:12px;">
                <div class="card-inner" style="text-align:center;">
                  {% if request.user.profile.avatar %}
                    <img src="{{ request.user.profile.avatar.url }}" alt="Avatar" style="width:100%; height:auto; border-radius:10px;"/>
                  {% else %}
                    <div style="height:180px; display:flex; align-items:center; justify-content:center; color:var(--text-muted);">No avatar</div>
                  {% endif %}
                </div>
              </div>
              <p style="margin-top:.6rem;">{{ profile_form.avatar.label_tag }} {{ profile_form.avatar }}</p>
            </div>
            <div class="stack">
              <div class="card">
                <div class="card-inner">
                  <h3>Basic Info</h3>
                  {{ user_form.as_p }}
                </div>
              </div>
              <div class="card">
                <div class="card-inner">
                  <h3>Professional</h3>
                  <p>{{ profile_form.company.label_tag }} {{ profile_form.company }}</p>
                  <p>{{ profile_form.job_title.label_tag }} {{ profile_form.job_title }}</p>
                  <p>{{ profile_form.location.label_tag }} {{ profile_form.location }}</p>
                  <p>{{ profile_form.primary_language.label_tag }} {{ profile_form.primary_language }}</p>
                </div>
              </div>
              <div class="card">
                <div class="card-inner">
                  <h3>About</h3>
                  <p>{{ profile_form.bio.label_tag }} {{ profile_form.bio }}</p>
                  <p>{{ profile_form.interests.label_tag }} {{ profile_form.interests }}</p>
                </div>
              </div>
              <div class="card">
                <div class="card-inner">
                  <h3>Links</h3>
                  <p>{{ profile_form.website.label_tag }} {{ profile_form.website }}</p>
                  <p>{{ profile_form.github.label_tag }} {{ profile_form.github }}</p>
                  <p>{{ profile_form.linkedin.label_tag }} {{ profile_form.linkedin }}</p>
                </div>
              </div>
            </div>
          </div>
          <div style="display:flex; gap:.6rem; align-items:center; flex-wrap:wrap; margin-top:1rem;">
            <button class="btn btn-form" type="submit">Save changes</button>
            <a class="muted-link" href="{% url 'auth:password_change' %}">Change password</a>
          </div>
        </div>
      </form>
    </div>
  </section>
{% endblock %}
